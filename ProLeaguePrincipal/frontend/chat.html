<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat en Vivo - ProLeague</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- Socket.io CDN -->
  <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
</head>
<body>

  <!-- HEADER -->
  <div id="header-placeholder"></div>

  <!-- MAIN -->
  <main class="chat-main">
    <div class="chat-container">
      
      <!-- NBA SECTION -->
      <section class="chat-section chat-nba" id="nba-section">
        <div class="chat-header nba-header">
          <img src="images/nba-logo.png" alt="NBA Logo" class="chat-logo">
          <h2>NBA Chat</h2>
        </div>
        <div class="chat-messages" id="nba-messages">
          <!-- Mensajes aquí -->
        </div>
        <form class="chat-form" id="nba-form">
          <input type="text" id="nba-input" placeholder="Escribe sobre NBA..." autocomplete="off">
          <button type="submit">Enviar</button>
        </form>
      </section>

      <!-- NFL SECTION -->
      <section class="chat-section chat-nfl" id="nfl-section">
        <div class="chat-header nfl-header">
          <img src="images/nfl-logo.png" alt="NFL Logo" class="chat-logo">
          <h2>NFL Chat</h2>
        </div>
        <div class="chat-messages" id="nfl-messages">
          <!-- Mensajes aquí -->
        </div>
        <form class="chat-form" id="nfl-form">
          <input type="text" id="nfl-input" placeholder="Escribe sobre NFL..." autocomplete="off">
          <button type="submit">Enviar</button>
        </form>
      </section>

    </div>
  </main>

  <!-- FOOTER -->
  <div id="footer-placeholder"></div>

  <!-- SCRIPTS -->
  <script src="chat.js"></script>
  <script>
    // Cargar Header y Footer
    fetch("header.html")
      .then(r => r.text())
      .then(html => {
        document.getElementById("header-placeholder").innerHTML = html;
        if (typeof google !== "undefined" && google.translate) googleTranslateElementInit();

        const user = JSON.parse(localStorage.getItem("user"));
        const logoutLink = document.getElementById("nav-logout");
        
        // Chat protegido: si no hay usuario, redirigir a login
        if (!user) {
          window.location.href = "login.html";
        }

        if (user && logoutLink) logoutLink.style.display = "inline";
        
        if (logoutLink) logoutLink.addEventListener("click", e => {
          e.preventDefault();
          localStorage.removeItem("user");
          window.location.href = "login.html";
        });
      });

    fetch("footer.html")
      .then(r => r.text())
      .then(html => document.getElementById("footer-placeholder").innerHTML = html);
  </script>
</body>
</html>
